import {visit} from "unist-util-visit";
import slugger from "github-slugger";
function createCollectHeaders() {
  const headers = [];
  const visitor = (node) => {
    var _a;
    if (node.type !== "element")
      return;
    const {tagName, children} = node;
    if (tagName[0] !== "h")
      return;
    let [_, depth] = (_a = tagName.match(/h([0-6])/)) != null ? _a : [];
    if (!depth)
      return;
    depth = Number.parseInt(depth);
    let text = "";
    visit(node, "text", (child) => {
      text += child.value;
    });
    let slug = node.properties.id || slugger.slug(text);
    node.properties = node.properties || {};
    node.properties.id = slug;
    headers.push({depth, slug, text});
    return node;
  };
  return {headers, rehypeCollectHeaders: () => (tree) => visit(tree, visitor)};
}
export {
  createCollectHeaders as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3JlaHlwZS1jb2xsZWN0LWhlYWRlcnMudHMiXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUNBO0FBR2UsZ0NBQWdDO0FBQzdDLFFBQU0sVUFBaUI7QUFFdkIsUUFBTSxVQUFVLENBQUMsU0FBYztBQVBqQztBQVFJLFFBQUksS0FBSyxTQUFTO0FBQVc7QUFDN0IsVUFBTSxDQUFFLFNBQVMsWUFBYTtBQUM5QixRQUFJLFFBQVEsT0FBTztBQUFLO0FBQ3hCLFFBQUksQ0FBQyxHQUFHLFNBQVMsY0FBUSxNQUFNLGdCQUFkLFlBQTZCO0FBQzlDLFFBQUksQ0FBQztBQUFPO0FBQ1osWUFBUSxPQUFPLFNBQVM7QUFFeEIsUUFBSSxPQUFPO0FBRVgsVUFBTSxNQUFNLFFBQVEsQ0FBQyxVQUFVO0FBQzdCLGNBQVMsTUFBYztBQUFBO0FBR3pCLFFBQUksT0FBTyxLQUFLLFdBQVcsTUFBTSxRQUFRLEtBQUs7QUFFOUMsU0FBSyxhQUFhLEtBQUssY0FBYztBQUNyQyxTQUFLLFdBQVcsS0FBSztBQUNyQixZQUFRLEtBQUssQ0FBRSxPQUFPLE1BQU07QUFFNUIsV0FBTztBQUFBO0FBR1QsU0FBTyxDQUFFLFNBQVMsc0JBQXNCLE1BQU0sQ0FBQyxTQUFjLE1BQU0sTUFBTTtBQUFBOyIsCiAgIm5hbWVzIjogW10KfQo=
